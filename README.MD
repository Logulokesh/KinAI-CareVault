# ğŸ¥ğŸ”’ KinAI-CareVault

**Your Intelligent Family Health & Financial Vault** ğŸ¤–âœ¨

KinAI-CareVault is an automated AI-powered system for processing medical and financial documents via Telegram, managing comprehensive family health profiles, and providing safe medication recommendations. It leverages PostgreSQL for structured storage, n8n workflows for automation, and AI (via Ollama) for intelligent document analysis and personalized medical advice.

## ğŸŒŸ Key Features

### ğŸ“„ Smart Document Processing
- ğŸ” **Auto-Classification**: Automatically identifies and categorizes uploaded documents (receipts ğŸ§¾, medical reports ğŸ“‹, prescriptions ğŸ’Š)
- ğŸ¥ **Medical Data Extraction**: Extracts patient details, test results, diagnoses, and treatment information
- ğŸ’³ **Financial Data Mining**: Captures vendor information, amounts, categories, and transaction details
- ğŸ—„ï¸ **Secure Storage**: Stores all data in PostgreSQL with robust security measures
- âœ… **Task Creation**: Automatically creates organized tasks in Vikunja with document attachments

### ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family Health Management
- ğŸ“Š **Comprehensive Profiles**: Maintains detailed health records for all family members
- ğŸ¥ **Medical History**: Tracks conditions, medications, allergies, and treatment history
- ğŸ” **Quick Retrieval**: Instant access to any family member's complete medical profile
- ğŸ“± **Telegram Queries**: Simple text commands to fetch health information

### ğŸ¤– AI-Powered Health Recommendations
- ğŸ’Š **Smart Medication Advice**: Provides safe medication suggestions considering individual health profiles
- âš ï¸ **Allergy Awareness**: Cross-references allergies and current medications for safety
- ğŸ“ **Dosage Guidance**: Includes proper dosing information and administration guidelines
- ğŸ‘¨â€âš•ï¸ **Professional Consultation**: Always recommends when to seek medical professional advice

### ğŸ“± Seamless Telegram Integration
- ğŸš€ **Real-time Processing**: Instant document processing and response
- ğŸ’¬ **Conversational Interface**: Natural language queries and responses
- ğŸ“Š **Rich Formatting**: Beautiful Markdown-formatted messages with clear information
- ğŸ”” **Smart Notifications**: Proactive alerts and confirmations

### ğŸ›¡ï¸ Enterprise-Grade Reliability
- âš¡ **High Performance**: Optimized database queries with proper indexing
- ğŸ”’ **Data Security**: Enforced schema constraints and data validation
- ğŸ”„ **Error Recovery**: Robust error handling with automatic retries
- ğŸ“ˆ **Monitoring**: Comprehensive logging and performance tracking

## ğŸ“‹ Prerequisites

### ğŸ—„ï¸ PostgreSQL Database
- âœ… Install PostgreSQL (version 13+ recommended)
- ğŸ—ï¸ Create database and apply schema from `document_processing_schema.txt`
- ğŸ” Configure secure database credentials for n8n connection

### ğŸ¤– Telegram Bot Setup
- ğŸ“± Create bot via [@BotFather](https://t.me/botfather) to obtain API token
- âš™ï¸ Configure bot permissions for file and message handling
- ğŸ”‘ Secure API token storage

### ğŸ“ Vikunja Task Management
- ğŸŒ Set up Vikunja instance (self-hosted or cloud)
- ğŸ”‘ Generate API token for task creation and file management
- ğŸ”— Configure API URL (e.g., `https://vikunja.logu.au/api/v1`)

### ğŸ§  Ollama AI Engine
- ğŸš€ Install and configure Ollama for AI-driven analysis
- ğŸ”§ Set up appropriate models for text and image processing
- ğŸŒ Ensure API accessibility and proper authentication

### âš™ï¸ n8n Workflow Platform
- ğŸ“¦ Install n8n (self-hosted or cloud, compatible versions)
- ğŸ“¥ Import workflow files:
  - `medical_enhanced_n8n_workflow (2).json` - Document processing
  - `fixed_n8n_workflow.json` - Medical queries and recommendations
- ğŸ” Configure all service credentials:
  - ğŸ“± Telegram API token
  - ğŸ—„ï¸ PostgreSQL connection details
  - ğŸ“ Vikunja API credentials
  - ğŸ§  Ollama API endpoint

### ğŸ’» Technical Requirements
- ğŸŸ¢ Node.js (version 16+) for n8n runtime
- ğŸ“¦ Required n8n packages:
  - `n8n-nodes-base` (Telegram, PostgreSQL, HTTP)
  - `@n8n/n8n-nodes-langchain` (AI integration)
- ğŸŒ Network connectivity between all services

## ğŸš€ Installation Guide

### 1ï¸âƒ£ Clone Repository
```bash
git clone https://github.com/your-username/kinai-carevault.git
cd kinai-carevault
```

### 2ï¸âƒ£ Database Setup
```bash
# Create the database
createdb kinai_carevault

# Apply the schema
psql -d kinai_carevault -f document_processing_schema.txt
```

### 3ï¸âƒ£ n8n Configuration
```bash
# Install n8n globally
npm install -g n8n

# Start n8n service
n8n start
```

ğŸŒ Access n8n UI at `http://localhost:5678`
- ğŸ“¥ Import both workflow JSON files
- ğŸ” Configure all service credentials
- âœ… Test workflow connections

### 4ï¸âƒ£ Vikunja Project Setup
- ğŸ“ Create projects matching categories in `categoryProjectMap`
- ğŸ·ï¸ Set up appropriate labels and permissions
- ğŸ”— Verify API connectivity

### 5ï¸âƒ£ System Testing
- ğŸ“± Send test document to Telegram bot
- ğŸ” Check n8n execution logs
- âœ… Verify database entries and Vikunja tasks

## ğŸ“– Usage Guide

### ğŸ“„ Document Upload Process
1. ğŸ“¸ **Send Document**: Upload medical report or receipt to Telegram bot
2. ğŸ”„ **Auto-Processing**: System analyzes and categorizes the document
3. ğŸ’¾ **Data Storage**: Information stored securely in database
4. ğŸ“ **Task Creation**: Vikunja task created with document attachment
5. âœ… **Confirmation**: Receive detailed confirmation with extracted data

### ğŸ’Š Medical Query Example
**Input**: `"What medication for Sarah's fever?"`

**Response**: 
```
ğŸ¥ Medication Recommendation for Sarah

ğŸ’Š Recommended: Acetaminophen (Tylenol)
ğŸ“ Dosage: 500mg every 4-6 hours
â° Max: 3000mg per day
âš ï¸ Considerations: No known allergies conflict
ğŸ‘¨â€âš•ï¸ Consult doctor if fever persists >3 days
```

### ğŸ“Š Vikunja Integration
- ğŸ“‹ View organized tasks by category
- ğŸ–¼ï¸ Access original document images
- ğŸ“ Add notes and track progress
- ğŸ·ï¸ Filter by family member or document type

### ğŸ“ˆ Database Monitoring
Use sample queries for insights:
```sql
-- ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family medical records
SELECT mr.*, fm.name as patient_name 
FROM medical_records mr 
JOIN family_members fm ON mr.family_member_id = fm.id 
WHERE fm.telegram_user_id = <user_id>;

-- ğŸ’° Monthly financial summary
SELECT category, SUM(amount) as total
FROM financial_records 
WHERE EXTRACT(MONTH FROM created_at) = EXTRACT(MONTH FROM CURRENT_DATE)
GROUP BY category;
```

## ğŸ“Š System Architecture

### ğŸ”„ High-Level Workflow
```mermaid
graph TD
    subgraph "ğŸ¥ğŸ”’ KinAI-CareVault System"
        A[ğŸ“± Telegram Input<br>Documents or Queries] -->|ğŸ“„ Document| B[ğŸ”„ Document Processing Workflow]
        A -->|ğŸ’¬ Query| C[ğŸ¥ Medical Profile Query Workflow]

        subgraph "ğŸ“„ Document Processing"
            B --> D[ğŸ§  AI Analysis<br>ğŸ” Classify Document<br>ğŸ“Š Extract Data]
            D --> E[ğŸ’¾ Store in PostgreSQL<br>ğŸ¥ Medical/ğŸ’° Financial Records]
            D --> F[ğŸ“ Create Vikunja Task<br>ğŸ–¼ï¸ Attach Image]
            E --> G[âœ… Send Telegram Confirmation]
        end

        subgraph "ğŸ¥ Medical Profile Query"
            C --> H[ğŸ” Query PostgreSQL<br>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Fetch Medical Profile]
            H --> I[ğŸ¤– AI Recommendation<br>ğŸ’Š Generate Medication Advice]
            I --> J[ğŸ“± Send Telegram Response]
        end

        D --> K[ğŸ§  Ollama AI]
        I --> K
        E --> L[ğŸ—„ï¸ PostgreSQL Database]
        H --> L
        F --> M[ğŸ“ Vikunja Task Management]
    end
```

## ğŸ¤ Contributing

We welcome contributions! ğŸ‰

### ğŸ“ How to Contribute
1. ğŸ´ **Fork** the repository
2. ğŸŒ¿ **Create** feature branch (`git checkout -b feature/amazing-feature`)
3. ğŸ’¾ **Commit** changes (`git commit -m 'âœ¨ Add amazing feature'`)
4. ğŸ“¤ **Push** to branch (`git push origin feature/amazing-feature`)
5. ğŸ”„ **Open** pull request

### ğŸ¯ Areas for Contribution
- ğŸ› Bug fixes and improvements
- ğŸ†• New document types support
- ğŸŒ Internationalization
- ğŸ“± Mobile app development
- ğŸ”’ Security enhancements
- ğŸ“Š Analytics and reporting features

## ğŸ“„ License

This project is licensed under the MIT License ğŸ“œ - see the [LICENSE](LICENSE) file for details.

## ğŸ“§ Contact & Support

- ğŸ› **Issues**: [GitHub Issues](https://github.com/your-username/kinai-carevault/issues)
- ğŸ’¬ **Questions**: [GitHub Discussions](https://github.com/your-username/kinai-carevault/discussions)
- ğŸ“§ **Email**: [your-email@example.com](mailto:your-email@example.com)
- ğŸŒŸ **Star** this repo if you find it helpful!

---

<div align="center">

**ğŸ¥ğŸ”’ KinAI-CareVault - Your Family's Intelligent Health & Financial Vault** 

*Made with â¤ï¸ by the KinAI Team*

[![â­ Star on GitHub](https://img.shields.io/github/stars/your-username/kinai-carevault?style=social)](https://github.com/your-username/kinai-carevault)
[![ğŸ´ Fork on GitHub](https://img.shields.io/github/forks/your-username/kinai-carevault?style=social)](https://github.com/your-username/kinai-carevault/fork)

</div>